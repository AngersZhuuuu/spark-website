<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Machine Learning Library (MLlib) - Spark 1.1.1 Documentation</title>
        <meta name="description" content="">

        

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <style>
            body {
                padding-top: 60px;
                padding-bottom: 40px;
            }
        </style>
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="css/bootstrap-responsive.min.css">
        <link rel="stylesheet" href="css/main.css">

        <script src="js/vendor/modernizr-2.6.1-respond-1.1.0.min.js"></script>

        <link rel="stylesheet" href="css/pygments-default.css">

        
        <!-- Google analytics script -->
        <script type="text/javascript">
          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-32518208-1']);
          _gaq.push(['_trackPageview']);

          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
        </script>
        

    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->

        <div class="navbar navbar-fixed-top" id="topbar">
            <div class="navbar-inner">
                <div class="container">
                    <div class="brand"><a href="index.html">
                      <img src="img/spark-logo-hd.png" style="height:50px;"/></a><span class="version">1.1.1</span>
                    </div>
                    <ul class="nav">
                        <!--TODO(andyk): Add class="active" attribute to li some how.-->
                        <li><a href="index.html">Overview</a></li>

                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Programming Guides<b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="quick-start.html">Quick Start</a></li>
                                <li><a href="programming-guide.html">Spark Programming Guide</a></li>
                                <li class="divider"></li>
                                <li><a href="streaming-programming-guide.html">Spark Streaming</a></li>
                                <li><a href="sql-programming-guide.html">Spark SQL</a></li>
                                <li><a href="mllib-guide.html">MLlib (Machine Learning)</a></li>
                                <li><a href="graphx-programming-guide.html">GraphX (Graph Processing)</a></li>
                                <li><a href="bagel-programming-guide.html">Bagel (Pregel on Spark)</a></li>
                            </ul>
                        </li>

                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">API Docs<b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="api/scala/index.html#org.apache.spark.package">Scaladoc</a></li>
                                <li><a href="api/java/index.html">Javadoc</a></li>
                                <li><a href="api/python/index.html">Python API</a></li>
                            </ul>
                        </li>

                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Deploying<b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="cluster-overview.html">Overview</a></li>
                                <li><a href="submitting-applications.html">Submitting Applications</a></li>
                                <li class="divider"></li>
                                <li><a href="ec2-scripts.html">Amazon EC2</a></li>
                                <li><a href="spark-standalone.html">Standalone Mode</a></li>
                                <li><a href="running-on-mesos.html">Mesos</a></li>
                                <li><a href="running-on-yarn.html">YARN</a></li>
                            </ul>
                        </li>

                        <li class="dropdown">
                            <a href="api.html" class="dropdown-toggle" data-toggle="dropdown">More<b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="configuration.html">Configuration</a></li>
                                <li><a href="monitoring.html">Monitoring</a></li>
                                <li><a href="tuning.html">Tuning Guide</a></li>
                                <li><a href="job-scheduling.html">Job Scheduling</a></li>
                                <li><a href="security.html">Security</a></li>
                                <li><a href="hardware-provisioning.html">Hardware Provisioning</a></li>
                                <li><a href="hadoop-third-party-distributions.html">3<sup>rd</sup>-Party Hadoop Distros</a></li>
                                <li class="divider"></li>
                                <li><a href="building-with-maven.html">Building Spark with Maven</a></li>
                                <li><a href="https://cwiki.apache.org/confluence/display/SPARK/Contributing+to+Spark">Contributing to Spark</a></li>
                            </ul>
                        </li>
                    </ul>
                    <!--<p class="navbar-text pull-right"><span class="version-text">v1.1.1</span></p>-->
                </div>
            </div>
        </div>

        <div class="container" id="content">
          
            <h1 class="title">Machine Learning Library (MLlib)</h1>
          

          <p>MLlib is Spark’s scalable machine learning library consisting of common learning algorithms and utilities,
including classification, regression, clustering, collaborative
filtering, dimensionality reduction, as well as underlying optimization primitives, as outlined below:</p>

<ul>
  <li><a href="mllib-data-types.html">Data types</a></li>
  <li><a href="mllib-statistics.html">Basic statistics</a>
    <ul>
      <li>summary statistics</li>
      <li>correlations</li>
      <li>stratified sampling</li>
      <li>hypothesis testing</li>
      <li>random data generation  </li>
    </ul>
  </li>
  <li><a href="mllib-classification-regression.html">Classification and regression</a>
    <ul>
      <li><a href="mllib-linear-methods.html">linear models (SVMs, logistic regression, linear regression)</a></li>
      <li><a href="mllib-decision-tree.html">decision trees</a></li>
      <li><a href="mllib-naive-bayes.html">naive Bayes</a></li>
    </ul>
  </li>
  <li><a href="mllib-collaborative-filtering.html">Collaborative filtering</a>
    <ul>
      <li>alternating least squares (ALS)</li>
    </ul>
  </li>
  <li><a href="mllib-clustering.html">Clustering</a>
    <ul>
      <li>k-means</li>
    </ul>
  </li>
  <li><a href="mllib-dimensionality-reduction.html">Dimensionality reduction</a>
    <ul>
      <li>singular value decomposition (SVD)</li>
      <li>principal component analysis (PCA)</li>
    </ul>
  </li>
  <li><a href="mllib-feature-extraction.html">Feature extraction and transformation</a></li>
  <li><a href="mllib-optimization.html">Optimization (developer)</a>
    <ul>
      <li>stochastic gradient descent</li>
      <li>limited-memory BFGS (L-BFGS)</li>
    </ul>
  </li>
</ul>

<p>MLlib is under active development.
The APIs marked <code>Experimental</code>/<code>DeveloperApi</code> may change in future releases, 
and the migration guide below will explain all changes between releases.</p>

<h1 id="dependencies">Dependencies</h1>

<p>MLlib uses the linear algebra package <a href="http://www.scalanlp.org/">Breeze</a>,
which depends on <a href="https://github.com/fommil/netlib-java">netlib-java</a>,
and <a href="https://github.com/mikiobraun/jblas">jblas</a>. 
<code>netlib-java</code> and <code>jblas</code> depend on native Fortran routines.
You need to install the
<a href="https://github.com/mikiobraun/jblas/wiki/Missing-Libraries">gfortran runtime library</a>
if it is not already present on your nodes.
MLlib will throw a linking error if it cannot detect these libraries automatically.
Due to license issues, we do not include <code>netlib-java</code>’s native libraries in MLlib’s
dependency set under default settings.
If no native library is available at runtime, you will see a warning message.
To use native libraries from <code>netlib-java</code>, please build Spark with <code>-Pnetlib-lgpl</code> or
include <code>com.github.fommil.netlib:all:1.1.2</code> as a dependency of your project.
If you want to use optimized BLAS/LAPACK libraries such as
<a href="http://www.openblas.net/">OpenBLAS</a>, please link its shared libraries to
<code>/usr/lib/libblas.so.3</code> and <code>/usr/lib/liblapack.so.3</code>, respectively.
BLAS/LAPACK libraries on worker nodes should be built without multithreading.</p>

<p>To use MLlib in Python, you will need <a href="http://www.numpy.org">NumPy</a> version 1.4 or newer.</p>

<hr />

<h1 id="migration-guide">Migration Guide</h1>

<h2 id="from-10-to-11">From 1.0 to 1.1</h2>

<p>The only API changes in MLlib v1.1 are in
<a href="api/scala/index.html#org.apache.spark.mllib.tree.DecisionTree"><code>DecisionTree</code></a>,
which continues to be an experimental API in MLlib 1.1:</p>

<ol>
  <li>
    <p><em>(Breaking change)</em> The meaning of tree depth has been changed by 1 in order to match
the implementations of trees in
<a href="http://scikit-learn.org/stable/modules/classes.html#module-sklearn.tree">scikit-learn</a>
and in <a href="http://cran.r-project.org/web/packages/rpart/index.html">rpart</a>.
In MLlib v1.0, a depth-1 tree had 1 leaf node, and a depth-2 tree had 1 root node and 2 leaf nodes.
In MLlib v1.1, a depth-0 tree has 1 leaf node, and a depth-1 tree has 1 root node and 2 leaf nodes.
This depth is specified by the <code>maxDepth</code> parameter in
<a href="api/scala/index.html#org.apache.spark.mllib.tree.configuration.Strategy"><code>Strategy</code></a>
or via <a href="api/scala/index.html#org.apache.spark.mllib.tree.DecisionTree"><code>DecisionTree</code></a>
static <code>trainClassifier</code> and <code>trainRegressor</code> methods.</p>
  </li>
  <li>
    <p><em>(Non-breaking change)</em> We recommend using the newly added <code>trainClassifier</code> and <code>trainRegressor</code>
methods to build a <a href="api/scala/index.html#org.apache.spark.mllib.tree.DecisionTree"><code>DecisionTree</code></a>,
rather than using the old parameter class <code>Strategy</code>.  These new training methods explicitly
separate classification and regression, and they replace specialized parameter types with
simple <code>String</code> types.</p>
  </li>
</ol>

<p>Examples of the new, recommended <code>trainClassifier</code> and <code>trainRegressor</code> are given in the
<a href="mllib-decision-tree.html#examples">Decision Trees Guide</a>.</p>

<h2 id="from-09-to-10">From 0.9 to 1.0</h2>

<p>In MLlib v1.0, we support both dense and sparse input in a unified way, which introduces a few
breaking changes.  If your data is sparse, please store it in a sparse format instead of dense to
take advantage of sparsity in both storage and computation. Details are described below.</p>

<div class="codetabs">
<div data-lang="scala">

    <p>We used to represent a feature vector by <code>Array[Double]</code>, which is replaced by
<a href="api/scala/index.html#org.apache.spark.mllib.linalg.Vector"><code>Vector</code></a> in v1.0. Algorithms that used
to accept <code>RDD[Array[Double]]</code> now take
<code>RDD[Vector]</code>. <a href="api/scala/index.html#org.apache.spark.mllib.regression.LabeledPoint"><code>LabeledPoint</code></a>
is now a wrapper of <code>(Double, Vector)</code> instead of <code>(Double, Array[Double])</code>. Converting
<code>Array[Double]</code> to <code>Vector</code> is straightforward:</p>

    <div class="highlight"><pre><code class="scala"><span class="k">import</span> <span class="nn">org.apache.spark.mllib.linalg.</span><span class="o">{</span><span class="nc">Vector</span><span class="o">,</span> <span class="nc">Vectors</span><span class="o">}</span>

<span class="k">val</span> <span class="n">array</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span> <span class="k">=</span> <span class="o">...</span> <span class="c1">// a double array</span>
<span class="k">val</span> <span class="n">vector</span><span class="k">:</span> <span class="kt">Vector</span> <span class="o">=</span> <span class="nc">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="o">(</span><span class="n">array</span><span class="o">)</span> <span class="c1">// a dense vector</span>
</code></pre></div>

    <p><a href="api/scala/index.html#org.apache.spark.mllib.linalg.Vectors$"><code>Vectors</code></a> provides factory methods to create sparse vectors.</p>

    <p><em>Note</em>: Scala imports <code>scala.collection.immutable.Vector</code> by default, so you have to import <code>org.apache.spark.mllib.linalg.Vector</code> explicitly to use MLlib’s <code>Vector</code>.</p>

  </div>

<div data-lang="java">

    <p>We used to represent a feature vector by <code>double[]</code>, which is replaced by
<a href="api/java/index.html?org/apache/spark/mllib/linalg/Vector.html"><code>Vector</code></a> in v1.0. Algorithms that used
to accept <code>RDD&lt;double[]&gt;</code> now take
<code>RDD&lt;Vector&gt;</code>. <a href="api/java/index.html?org/apache/spark/mllib/regression/LabeledPoint.html"><code>LabeledPoint</code></a>
is now a wrapper of <code>(double, Vector)</code> instead of <code>(double, double[])</code>. Converting <code>double[]</code> to
<code>Vector</code> is straightforward:</p>

    <div class="highlight"><pre><code class="java"><span class="kn">import</span> <span class="nn">org.apache.spark.mllib.linalg.Vector</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.spark.mllib.linalg.Vectors</span><span class="o">;</span>

<span class="kt">double</span><span class="o">[]</span> <span class="n">array</span> <span class="o">=</span> <span class="o">...</span> <span class="c1">// a double array</span>
<span class="n">Vector</span> <span class="n">vector</span> <span class="o">=</span> <span class="n">Vectors</span><span class="o">.</span><span class="na">dense</span><span class="o">(</span><span class="n">array</span><span class="o">);</span> <span class="c1">// a dense vector</span>
</code></pre></div>

    <p><a href="api/scala/index.html#org.apache.spark.mllib.linalg.Vectors$"><code>Vectors</code></a> provides factory methods to
create sparse vectors.</p>

  </div>

<div data-lang="python">

    <p>We used to represent a labeled feature vector in a NumPy array, where the first entry corresponds to
the label and the rest are features.  This representation is replaced by class
<a href="api/python/pyspark.mllib.regression.LabeledPoint-class.html"><code>LabeledPoint</code></a>, which takes both
dense and sparse feature vectors.</p>

    <div class="highlight"><pre><code class="python"><span class="kn">from</span> <span class="nn">pyspark.mllib.linalg</span> <span class="kn">import</span> <span class="n">SparseVector</span>
<span class="kn">from</span> <span class="nn">pyspark.mllib.regression</span> <span class="kn">import</span> <span class="n">LabeledPoint</span>

<span class="c"># Create a labeled point with a positive label and a dense feature vector.</span>
<span class="n">pos</span> <span class="o">=</span> <span class="n">LabeledPoint</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">])</span>

<span class="c"># Create a labeled point with a negative label and a sparse feature vector.</span>
<span class="n">neg</span> <span class="o">=</span> <span class="n">LabeledPoint</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">SparseVector</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]))</span>
</code></pre></div>

  </div>
</div>


        </div> <!-- /container -->

        <script src="js/vendor/jquery-1.8.0.min.js"></script>
        <script src="js/vendor/bootstrap.min.js"></script>
        <script src="js/main.js"></script>

        <!-- MathJax Section -->
        <script type="text/x-mathjax-config">
            MathJax.Hub.Config({
                TeX: { equationNumbers: { autoNumber: "AMS" } }
            });
        </script>
        <script>
            // Note that we load MathJax this way to work with local file (file://), HTTP and HTTPS.
            // We could use "//cdn.mathjax...", but that won't support "file://".
            (function(d, script) {
                script = d.createElement('script');
                script.type = 'text/javascript';
                script.async = true;
                script.onload = function(){
                    MathJax.Hub.Config({
                        tex2jax: {
                            inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ],
                            displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], 
                            processEscapes: true,
                            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
                        }
                    });
                };
                script.src = ('https:' == document.location.protocol ? 'https://' : 'http://') +
                    'cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
                d.getElementsByTagName('head')[0].appendChild(script);
            }(document));
        </script>
    </body>
</html>
